# Visma Technical Challenge
In the context of the recruitment process, it was required the following challenge:

## 1. Proposed Problem
<code>
Technical Exercise

We want to get a better understanding of a) the code you produce but also b) how you go about architecting an extensible solution and finally c) how you might explain a concept or pattern to others.  
Rather than coding something in front of us, which is unrealistic in an interview situation, what we’d like you to do is produce a small solution that demonstrates IAM concepts. We’d like to see both an API and an app consuming the API.  

The API:  
- Should enable token based authorization, any package/lib is fine to help with this task
- The protected endpoint should output some random data, could be a datetime stamp or anything else. Payload itself is irrelevant, please focus on the security aspects of the API

The App:
- Enable a user to authenticate by providing user credentials or using an external provider (ie Google) to provide login functionality. Any package/lib is fine to help with this task
- The app needs to invoke the protected API endpoint with the token and display the data received from the API
- Looks (style) of the app is irrelevant, please focus on functionality
- Token provider can be in-app, Saas (Okta, Auth0 etc.) or any open-source solution ie Duende IdentityServer, Keycloak etc.

This should be created in pure C#. You are free to use third-party libraries to help with some aspects of it.  
Each part of the solution should be testable by design, we are not looking for 100% code coverage but show examples of how the individual parts are unit-testable.  
When you come in we would like you to be able to describe your solution and use your solution to explain IAM, workflows advantages or disadvantages it might have.  
We can then talk about how we can extend and adapt your solution for more complicated scenarios and the changes that would be involved.  
Please deliver the code to us before the interview so that we have enough time to have a look through your solution.  
</code>

## 2. Proposed Solution
The proposed solution can be found in the current repository, and consists of the following structure:

### 2.1 API (Identity Project)
The API consists of a RESTFull API, to manage the Users and the Roles. The datamodel is generated by migration, using the Identity objects.  
The API provides a series of endpoints, following a RESTful approach, and it was implemented using dependency injection.  
The API was developed using 4 layers - the Control layer, in which the Endpoints are defined, a Service layer, in which all the business logic is defined, the models, which are Request Models, given that the Entities are provided by Identity, and a Database Layer, that abstracts the connection.  
The API connects to SQL Server. The connection string can be found in the appsettings file.  
Finally, the API generates Authentication Tokens using JWT. The settings can also be found in the appsettings file.

#### 2.1.1 Automated Tests
All the endpoints and services from the API are covered by unittests. The implementation of the services was designed using Dependecy Injection to isolate each layer, thus making the mocking of each dependency straightforward.

### 2.2 App
Although I'm more familiar with Angular for presentation, the App was designed as a WebApplication in C#, as per the requirement in the **Proposed Problem**.  
The App is a basic MVVM App, for authentication, and uses the native HTTPClient to make requests to the API. The domain of the endpoints can be found in the App appsettings.  
One thing worth noticing is the usage of a Singleton class to handle the logged user's information.  